Comment: "Transaction Workflow"
StartAt: startTransactionStep
States:
  startTransactionStep:
    Type: Task
    Resource: 'arn:aws:states:::lambda:invoke.waitForTaskToken'
    Parameters:
      FunctionName: !GetAtt start-transaction-lambda.Arn
      Payload:
        taskToken.$: "$$.Task.Token"
        transactionId.$: "$.transactionId"
        body:
          currencyFrom.$: "$.body.currencyFrom"
          currencyTo.$: "$.body.currencyTo"
          currencyFromAmount.$: "$.body.currencyFromAmount"
    TimeoutSeconds: 60
    Next: saveUserDataStepStep
  saveUserDataStepStep:
    Type: Task
    Resource: 'arn:aws:states:::lambda:invoke.waitForTaskToken'
    Parameters:
      FunctionName: !GetAtt save-user-data-step-lambda.Arn
      Payload:
        taskToken.$: "$$.Task.Token"
        transactionId.$: "$.transactionId"
        body:
          firstName.$: "$.body.firstName"
          lastName.$: "$.body.lastName"
          city.$: "$.body.city"
          street.$: "$.body.street"
          zipCode.$: "$.body.zipCode"
          email.$: "$.body.email"
    TimeoutSeconds: 60
    End: true
  # PLOP_ADD_WORKFLOW_STEP

